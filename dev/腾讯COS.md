# 文件管理



**文档**:[对象存储 快速入门-SDK 文档-文档中心-腾讯云 (tencent.com)](https://cloud.tencent.com/document/product/436/10199)

------

## 前言  

 	一般传统的web服务器，在管理文件时，都会直接将其存储在web服务器上，这样做确实方便，在用户访问文件时会占用大量的服务器带宽，而带宽占用过高则会严重降低用户体验。通常来说我们都会将文件管理交给单独的文件管理服务器去做，但是自行搭建FastDFS或者MinIO服务器，实在难于管理，最优的解决办法就是采用第三方提供的对象存储服务。

​	我们项目采用的是腾讯云的COS云对象存储服务，相关价格还算比较优惠，SDK也比较全面，开发起来也相对比较轻松。**以下文档中，对象即文件，文件也就是对象。**



## 文件的上传

​	用户将文件上传至服务端，服务端并不会将文件保存在服务器上，而是将其作为对象上传至腾讯云提供的COS对象存储桶中，传输的过程是异步的，但是我们也可以通过同步的方式来获取结果。上传完成后，将文件对应的信息存入数据库中。

![image-20220819190853927](assets/%E8%85%BE%E8%AE%AFCOS/image-20220819190853927.png)

## 文件的访问（下载）

​	当用户将文件上传到cos中后，如果想要访问的话有两种情况。如果用户访问的是公共文件，比如某个博客的图片，那么可以从服务端直接拿到图片的url。如果访问的是私有文件，那么会拿到一个预签名的url，它与普通url的区别在于，这是一个临时生成的url，且具有时效性，可以更好的保护私有文件。

![image-20220819202546996](assets/%E8%85%BE%E8%AE%AFCOS/image-20220819202546996.png)